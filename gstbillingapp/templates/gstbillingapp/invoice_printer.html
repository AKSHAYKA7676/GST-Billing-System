<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Invoice - GST 2.0</title>

    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th, td { border: 1px solid #ccc; padding: 8px; }
        th { background: #f3f3f3; }
        .header { text-align: center; margin-bottom: 20px; }
        .gst2 { color: #0066cc; font-weight: bold; }
        .small { font-size: 13px; color: #666; }
        .total-box { float: right; width: 40%; }
    </style>
</head>

<body>

<div class="header">
    <h2>{{ user_profile.business_title }}</h2>
    <p>{{ user_profile.business_address }}</p>
    <p>
        GSTIN: {{ user_profile.business_gst }} |
        Email: {{ user_profile.business_email }} |
        Phone: {{ user_profile.business_phone }}
    </p>
    <h3 class="gst2">GST SYSTEM 2.0 – TAX INVOICE</h3>
</div>

<hr>

<h3>Invoice Details</h3>
<table>
    <tr>
        <th>Invoice No</th>
        <td>{{ invoice.invoice_number }}</td>
        <th>Date</th>
        <td>{{ invoice.invoice_date }}</td>
    </tr>
    <tr>
        <th>Customer Name</th>
        <td>{{ invoice.invoice_customer.customer_name }}</td>
        <th>GSTIN</th>
        <td>{{ invoice.invoice_customer.customer_gst }}</td>
    </tr>
    <tr>
        <th>Address</th>
        <td colspan="3">{{ invoice.invoice_customer.customer_address }}</td>
    </tr>
</table>

<h3>Item Details – GST 2.0 Format</h3>

<table>
    <thead>
        <tr>
            <th>#</th>
            <th>Item</th>
            <th>HSN</th>
            <th>Qty</th>
            <th>Rate</th>
            <th>GST %</th>
            <th>Pre-GST Value</th>
            <th>CGST</th>
            <th>SGST</th>
            <th>Total</th>
        </tr>
    </thead>

    <tbody>
        {% for item in invoice_data.items %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ item.product_name }}</td>
            <td>{{ item.product_hsn }}</td>
            <td>{{ item.qty }}</td>
            <td>{{ item.rate_without_gst }}</td>
            <td>{{ item.gst_percent }}%</td>

            <!-- GST 2.0 Calculations -->
            <td>{{ item.value_without_gst }}</td>
            <td>{{ item.cgst_value }}</td>
            <td>{{ item.sgst_value }}</td>
            <td>{{ item.total_value_with_gst }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<br>

<div class="total-box">
    <table>
        <tr>
            <th>Total Before GST</th>
            <td>{{ invoice_data.total_without_gst }}</td>
        </tr>
        <tr>
            <th>Total CGST</th>
            <td>{{ invoice_data.total_cgst }}</td>
        </tr>
        <tr>
            <th>Total SGST</th>
            <td>{{ invoice_data.total_sgst }}</td>
        </tr>
        <tr>
            <th>Grand Total (GST 2.0)</th>
            <td><strong>₹ {{ invoice_data.invoice_total_amt_with_gst }}</strong></td>
        </tr>
        <tr>
            <td colspan="2" class="small">Amount in Words: <b>{{ total_in_words }}</b></td>
        </tr>
    </table>
</div>

<br><br><br>

<center>
    <p><b>Thank you for your business!</b></p>
    <p class="small">GST System 2.0 – Auto-compliant Invoice</p>
</center>

</body>
</html>
